---
import Layout from "../layouts/Layout.astro";
import Banner from "../components/Banner.astro";
import BlogCard from "../components/BlogCard.astro";
import ProductCard from "../components/ProductCard.astro";
import mentalModelsImage from "../assets/mental-models.webp";
import successPhilosophyImage from "../assets/success-philosophy.webp";
import stoicWisdomImage from "../assets/stoic-wisdom.webp";
import successMindsetImage from "../assets/success-mindset.webp";
import mentalClarityImage from "../assets/mental-clarity.webp";
import digitalPlannerImage from "../assets/2026-planner.webp";

const structuredData = {
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebSite",
      "@id": "https://successodysseyhub.com/#website",
      "url": "https://successodysseyhub.com/",
      "name": "Success Odyssey Hub",
      "description": "Transform your life with proven strategies, mental models, and timeless wisdom",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://successodysseyhub.com/blog?search={search_term_string}",
        "query-input": "required name=search_term_string"
      },
      "inLanguage": "en-US"
    },
    {
      "@type": "Organization",
      "@id": "https://successodysseyhub.com/#organization",
      "name": "Success Odyssey Hub",
      "url": "https://successodysseyhub.com/",
      "logo": {
        "@type": "ImageObject",
        "url": "https://successodysseyhub.com/assets/logo.png",
        "width": 120,
        "height": 120
      },
      "sameAs": [
        "https://twitter.com/successodyssey",
        "https://facebook.com/successodyssey",
        "https://linkedin.com/company/successodyssey"
      ]
    },
    {
      "@type": "ItemList",
      "@id": "https://successodysseyhub.com/#featured-articles",
      "name": "Featured Articles",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "item": {
            "@type": "Article",
            "headline": "Mental Models for Better Decisions",
            "description": "Discover powerful thinking frameworks",
            "url": "https://successodysseyhub.com/blog/mental-models",
            "image": "https://successodysseyhub.com" + mentalModelsImage.src
          }
        },
        {
          "@type": "ListItem",
          "position": 2,
          "item": {
            "@type": "Article",
            "headline": "The Philosophy of Success",
            "description": "Learn timeless principles and daily habits",
            "url": "https://successodysseyhub.com/blog/success-philosophy",
            "image": "https://successodysseyhub.com" + successPhilosophyImage.src
          }
        },
        {
          "@type": "ListItem",
          "position": 3,
          "item": {
            "@type": "Article",
            "headline": "Stoic Wisdom for Modern Life",
            "description": "Apply ancient Stoic teachings",
            "url": "https://successodysseyhub.com/blog/stoicism",
            "image": "https://successodysseyhub.com" + stoicWisdomImage.src
          }
        }
      ]
    }
  ]
};
---

<Layout
  title="Success Odyssey Hub - Transform Your Life with Proven Strategies"
  description="Discover mental models, stoicism, and success philosophy. Transform your life with proven strategies and timeless wisdom for personal development."
  keywords="success, philosophy, stoicism, mental models, personal development, mindfulness, self improvement"
>
  <Fragment slot="head">
    <script type="application/ld+json" set:html={JSON.stringify(structuredData)} />
    <link rel="preload" as="image" href={mentalModelsImage.src} />
  </Fragment>

  <!-- Hero Section -->
  <section class="hero" itemscope itemtype="https://schema.org/WPHeader">
    <div class="hero-background"></div>
    <div class="container">
      <div class="hero-content">
        <h1 itemprop="headline">
          Transform Your Life with
          <span class="gradient-text">Proven Strategies</span>
        </h1>
        <p itemprop="description">
          Discover the power of mental models, ancient wisdom, and success philosophy
          to unlock your potential and create lasting change.
        </p>
        <div class="hero-cta">
          <a href="#featured" class="cta-button primary">
            Explore Articles
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M7 17L17 7M17 7H7M17 7V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
          <a href="/products" class="cta-button secondary">
            View Products
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Banner -->
  <div class="container">
    <Banner />
  </div>

  <!-- Featured Articles -->
  <section id="featured" class="featured-section" aria-labelledby="featured-title">
    <div class="container">
      <div class="section-header">
        <h2 id="featured-title">Featured Articles</h2>
        <p>Explore our most popular insights on personal development and success</p>
      </div>

      <div class="cards fade-in">
        <BlogCard
          title="Mental Models for Better Decisions"
          summary="Discover powerful thinking frameworks that help you navigate complex problems and make smarter choices in life and business."
          image={mentalModelsImage.src}
          link="/blog/mental-models"
        />
        <BlogCard
          title="The Philosophy of Success"
          summary="Learn timeless principles and daily habits that successful people use to achieve their goals and maintain long-term fulfillment."
          image={successPhilosophyImage.src}
          link="/blog/success-philosophy"
        />
        <BlogCard
          title="Stoic Wisdom for Modern Life"
          summary="Apply ancient Stoic teachings to build resilience, find inner peace, and maintain clarity in our fast-paced modern world."
          image={stoicWisdomImage.src}
          link="/blog/stoicism"
        />
      </div>
    </div>
  </section>

  <!-- Digital Products Section -->
  <section class="products-section" aria-labelledby="products-title">
    <div class="container">
      <div class="section-header">
        <h2 id="products-title">Premium Resources</h2>
        <p>Transform your life with our carefully crafted digital products</p>
      </div>

      <div class="cards fade-in">
        <ProductCard
          title="The Success Mindset eBook"
          description="A comprehensive guide to developing the mental frameworks that drive extraordinary results. 150+ pages of actionable strategies."
          price="29.99"
          originalPrice="49.99"
          image={successMindsetImage}
          link="https://gumroad.com/l/success-mindset-ebook"
          badge="Bestseller"
        />
        <ProductCard
          title="Mental Clarity Service"
          description="Personalized 1-on-1 coaching session to identify your mental blocks and create a clear path to your goals."
          price="149.99"
          originalPrice="199.99"
          image={mentalClarityImage}
          link="https://claritymentalhealth.net/"
          badge="Limited"
        />
        <ProductCard
          title="Digital Life Planner"
          description="Interactive Notion template with goal tracking, habit formation, and reflection frameworks. Lifetime updates included."
          price="1.99"
          originalPrice="11.99"
          image={digitalPlannerImage}
          link="https://www.etsy.com/listing/4366750562/digital-planner-2026-fully-hyperlinked"
          badge="New"
        />
      </div>

      <div class="view-all-products">
        <a href="/products" class="view-all-button">
          View All Products
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M7 17L17 7M17 7H7M17 7V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- About Section -->
  <section class="about-preview" aria-labelledby="about-title">
    <div class="container">
      <div class="about-content">
        <h2 id="about-title">Your Journey to Success Starts Here</h2>
        <p>Success Odyssey combines timeless wisdom with modern insights to help you build a meaningful and successful life. Our carefully curated content focuses on practical strategies that create real, lasting change.</p>
        <div class="features">
          <div class="feature">
            <div class="feature-icon" aria-hidden="true">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <h3>Proven Strategies</h3>
            <p>Evidence-based approaches backed by research and real-world results.</p>
          </div>
          <div class="feature">
            <div class="feature-icon" aria-hidden="true">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M13 2L3 14H12L11 22L21 10H12L13 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <h3>Practical Wisdom</h3>
            <p>Actionable insights you can apply immediately to see positive changes.</p>
          </div>
          <div class="feature">
            <div class="feature-icon" aria-hidden="true">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M16 21V19C16 17.9391 15.5786 16.9217 14.8284 16.1716C14.0783 15.4214 13.0609 15 12 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21M12.5 7C12.5 9.20914 10.7091 11 8.5 11C6.29086 11 4.5 9.20914 4.5 7C4.5 4.79086 6.29086 3 8.5 3C10.7091 3 12.5 4.79086 12.5 7ZM20 8V14M23 11H17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <h3>Personal Growth</h3>
            <p>Comprehensive approach to developing both mindset and practical skills.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Newsletter Section - Ã‡ALIÅžAN VERSÄ°YON -->
  <section class="newsletter-section" aria-labelledby="newsletter-title">
    <div class="container">
      <div class="newsletter">
        <div class="newsletter-content">
          <div class="newsletter-icon">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M3 8L10.89 13.26C11.2187 13.4793 11.6049 13.5963 12 13.5963C12.3951 13.5963 12.7813 13.4793 13.11 13.26L21 8M5 19H19C19.5304 19 20.0391 18.7893 20.4142 18.4142C20.7893 18.0391 21 17.5304 21 17V7C21 6.46957 20.7893 5.96086 20.4142 5.58579C20.0391 5.21071 19.5304 5 19 5H5C4.46957 5 3.96086 5.21071 3.58579 5.58579C3.21071 5.96086 3 6.46957 3 7V17C3 17.5304 3.21071 18.0391 3.58579 18.4142C3.96086 18.7893 4.46957 19 5 19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="newsletter-text">
            <h2 id="newsletter-title">Join Our Community</h2>
            <p>Get weekly insights on success, mindset, and personal growth delivered to your inbox.</p>
          </div>
        </div>

        <form id="newsletter-form" class="newsletter-form">
          <div class="form-wrapper">
            <label for="email-input" class="visually-hidden">Email address</label>
            <input
              type="email"
              id="email-input"
              class="email-input"
              placeholder="Enter your email"
              required
              autocomplete="email"
            />
            <button type="submit" class="subscribe-btn">
              <span class="btn-text">Subscribe</span>
              <span class="btn-loading">
                <svg class="spinner" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12 2V6M12 18V22M6 12H2M22 12H18M19.07 19.07L16.24 16.24M19.07 4.93L16.24 7.76M4.93 19.07L7.76 16.24M4.93 4.93L7.76 7.76" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Subscribing...
              </span>
              <span class="btn-success">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M20 6L9 17L4 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Subscribed!
              </span>
            </button>
          </div>
          <div id="email-error" class="message error-message"></div>
          <div class="message success-message"></div>
        </form>
      </div>
    </div>
  </section>

</Layout>

<style lang="scss">
/* Hero Section */
.hero {
  position: relative;
  padding: 6rem 0 4rem;
  overflow: hidden;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

  &-background {
    position: absolute;
    inset: 0;
    background:
      radial-gradient(circle at 20% 50%, rgba(255,255,255,0.1) 0%, transparent 50%),
      radial-gradient(circle at 80% 80%, rgba(255,255,255,0.1) 0%, transparent 50%);
    animation: pulse 8s ease-in-out infinite;
  }

  &-content {
    position: relative;
    text-align: center;
    color: white;
    max-width: 900px;
    margin: 0 auto;

    h1 {
      font-size: clamp(2.5rem, 5vw, 4rem);
      font-weight: 800;
      line-height: 1.2;
      margin-bottom: 1.5rem;
      text-shadow: 0 2px 20px rgba(0,0,0,0.2);

      .gradient-text {
        background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
    }

    p {
      font-size: clamp(1.1rem, 2vw, 1.3rem);
      line-height: 1.8;
      margin-bottom: 2.5rem;
      opacity: 0.95;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }
  }

  &-cta {
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;

    .cta-button {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 1rem 2rem;
      border-radius: var(--radius);
      font-weight: 600;
      text-decoration: none;
      transition: all 0.3s ease;
      font-size: 1.1rem;

      &.primary {
        background: white;
        color: var(--color-primary);
        box-shadow: 0 4px 20px rgba(0,0,0,0.2);

        &:hover {
          transform: translateY(-3px);
          box-shadow: 0 8px 30px rgba(0,0,0,0.3);
        }
      }

      &.secondary {
        background: transparent;
        color: white;
        border: 2px solid white;

        &:hover {
          background: white;
          color: var(--color-primary);
          transform: translateY(-3px);
        }
      }
    }
  }
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.8; }
}

/* Products Section */
.products-section {
  padding: 4rem 0;
  background: linear-gradient(135deg, var(--color-bg-secondary) 0%, var(--color-bg-tertiary) 100%);

  .section-header {
    text-align: center;
    margin-bottom: 3rem;

    h2 {
      color: var(--color-text-primary);
      margin-bottom: 1rem;
    }

    p {
      color: var(--color-text-tertiary);
      font-size: 1.1rem;
      max-width: 600px;
      margin: 0 auto;
    }
  }

  .view-all-products {
    text-align: center;
    margin-top: 3rem;

    .view-all-button {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 1rem 2rem;
      background: transparent;
      color: var(--color-primary);
      border: 2px solid var(--color-primary);
      border-radius: var(--radius);
      font-weight: 600;
      text-decoration: none;
      transition: var(--transition);

      &:hover {
        background: var(--color-primary);
        color: white;
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
      }
    }
  }
}

/* About Preview Section */
.about-preview {
  padding: 4rem 0;

  .about-content {
    text-align: center;
    max-width: 1000px;
    margin: 0 auto;

    h2 {
      margin-bottom: 1.5rem;
      color: var(--color-text-primary);
    }

    > p {
      font-size: 1.1rem;
      color: var(--color-text-secondary);
      margin-bottom: 3rem;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }

    .features {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;

      .feature {
        text-align: center;
        padding: 1.5rem;
        transition: var(--transition);

        &:hover {
          transform: translateY(-5px);
        }

        &-icon {
          display: inline-flex;
          align-items: center;
          justify-content: center;
          width: 60px;
          height: 60px;
          background: var(--gradient-primary);
          border-radius: 50%;
          color: white;
          margin-bottom: 1rem;
        }

        h3 {
          margin-bottom: 0.75rem;
          color: var(--color-text-primary);
        }

        p {
          color: var(--color-text-tertiary);
          line-height: 1.6;
        }
      }
    }
  }
}

/* Featured Section */
.featured-section {
  padding: 2rem 0 4rem;

  .section-header {
    text-align: center;
    margin-bottom: 3rem;

    h2 {
      margin-bottom: 1rem;
    }

    p {
      color: var(--color-text-tertiary);
      font-size: 1.1rem;
      max-width: 600px;
      margin: 0 auto;
    }
  }
}

/* Newsletter Section - DÃœZELTÄ°LMÄ°Åž */
.newsletter-section {
  padding: 4rem 0;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.newsletter {
  color: white;
  position: relative;
  overflow: hidden;

  &::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at 70% 30%, rgba(255,255,255,0.1) 0%, transparent 50%);
    pointer-events: none;
  }

  &-content {
    position: relative;
    max-width: 800px;
    margin: 0 auto 2rem;
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 2rem;
    align-items: center;
  }

  &-icon {
    flex-shrink: 0;

    svg {
      opacity: 0.9;
    }
  }

  &-text {
    h2 {
      margin-bottom: 0.5rem;
      color: white;
      font-size: 1.8rem;
    }

    p {
      opacity: 0.95;
      margin-bottom: 0;
      font-size: 1rem;
    }
  }

  &-form {
    position: relative;
    max-width: 800px;
    margin: 0 auto;

    .form-wrapper {
      display: flex;
      gap: 0.75rem;
      margin-bottom: 0.75rem;
    }

    .email-input {
      flex: 1;
      padding: 1rem 1.25rem;
      border: 2px solid transparent;
      border-radius: var(--radius);
      font-size: 1rem;
      background: white;
      color: var(--color-text-primary);
      transition: var(--transition);

      &:focus {
        outline: none;
        border-color: var(--color-accent);
        box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.2);
      }

      &.error {
        border-color: #ef4444;
      }

      &::placeholder {
        color: var(--color-text-tertiary);
      }
    }

    .subscribe-btn {
      padding: 1rem 2rem;
      background: var(--color-accent);
      color: white;
      border: none;
      border-radius: var(--radius);
      font-weight: 700;
      cursor: pointer;
      transition: var(--transition);
      position: relative;
      min-width: 140px;
      overflow: hidden;
      font-size: 1rem;

      &:hover:not(:disabled) {
        background: #d97706;
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(0,0,0,0.2);
      }

      &:disabled {
        opacity: 0.8;
        cursor: not-allowed;
      }

      .btn-text,
      .btn-loading,
      .btn-success {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        transition: transform 0.3s ease;
      }

      .btn-loading,
      .btn-success {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        transform: translateY(100%);
      }

      &.loading {
        .btn-text { transform: translateY(-100%); }
        .btn-loading { transform: translateY(0); }
      }

      &.success {
        background: #10b981;
        .btn-text { transform: translateY(-100%); }
        .btn-success { transform: translateY(0); }
      }
    }

    .message {
      padding: 0.75rem 1rem;
      border-radius: var(--radius-sm);
      font-size: 0.9rem;
      display: none;
      animation: slideDown 0.3s ease;

      &.show {
        display: block;
      }
    }

    .error-message {
      background: rgba(239, 68, 68, 0.15);
      border: 1px solid rgba(239, 68, 68, 0.3);
      color: #fecaca;
    }

    .success-message {
      background: rgba(16, 185, 129, 0.15);
      border: 1px solid rgba(16, 185, 129, 0.3);
      color: #86efac;
    }
  }
}

.visually-hidden {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

.spinner {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Fade-in animation */
.fade-in {
  animation: fadeIn 0.8s ease-in;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Responsive */
@media (max-width: 768px) {
  .hero {
    padding: 4rem 0 3rem;

    &-cta {
      flex-direction: column;

      .cta-button {
        width: 100%;
        justify-content: center;
      }
    }
  }

  .newsletter {
    &-content {
      grid-template-columns: 1fr;
      text-align: center;
    }

    &-icon {
      margin: 0 auto;
    }

    &-form .form-wrapper {
      flex-direction: column;

      .subscribe-btn {
        width: 100%;
        padding: 1rem;
      }
    }
  }

  .products-section,
  .featured-section {
    padding: 2rem 0;
  }

  .about-preview {
    padding: 2rem 0;

    .about-content .features {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }
  }
}
</style>

<script>
// Newsletter Form Handler - ConvertKit Integration
class NewsletterHandler {
  constructor() {
    this.form = document.getElementById('newsletter-form');
    this.emailInput = document.getElementById('email-input');
    this.submitBtn = this.form?.querySelector('.subscribe-btn');
    this.errorMsg = document.getElementById('email-error');
    this.successMsg = this.form?.querySelector('.success-message');

    // ConvertKit configuration
    this.FORM_ID = 'e6d21394ce';
    this.API_KEY = import.meta.env.PUBLIC_CONVERTKIT_API_KEY;
    this.API_URL = `https://api.convertkit.com/v3/forms/${this.FORM_ID}/subscribe`;

    this.init();
  }

  init() {
    if (!this.form) return;

    this.form.addEventListener('submit', (e) => this.handleSubmit(e));
    this.emailInput?.addEventListener('input', () => this.clearError());
  }

  async handleSubmit(e) {
    e.preventDefault();

    const email = this.emailInput?.value.trim();

    // Email validation
    if (!this.validateEmail(email)) {
      this.showError('Please enter a valid email address');
      return;
    }

    // API Key kontrolÃ¼
    if (!this.API_KEY) {
      console.error('ConvertKit API Key is missing!');
      this.showError('Configuration error. Please contact support.');
      return;
    }

    // Show loading state
    this.setLoading(true);

    try {
      const response = await fetch(this.API_URL, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          api_key: this.API_KEY,
          email: email,
        })
      });

      const data = await response.json();

      console.log('ConvertKit response:', data);

      if (response.ok && data.subscription) {
        this.showSuccess();
        this.form.reset();

        // Analytics tracking (opsiyonel)
        if (typeof gtag !== 'undefined') {
          gtag('event', 'newsletter_signup', {
            event_category: 'engagement',
            event_label: 'convertkit_form'
          });
        }
      } else {
        const errorMessage = data.error || data.message || 'Subscription failed. Please try again.';
        console.error('ConvertKit error:', errorMessage);
        this.showError(errorMessage);
      }
    } catch (error) {
      console.error('Newsletter subscription error:', error);
      this.showError('Network error. Please check your connection and try again.');
    } finally {
      this.setLoading(false);
    }
  }

  validateEmail(email) {
    if (!email) return false;
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
  }

  setLoading(isLoading) {
    if (!this.submitBtn) return;

    if (isLoading) {
      this.submitBtn.disabled = true;
      this.submitBtn.classList.add('loading');
    } else {
      this.submitBtn.disabled = false;
      this.submitBtn.classList.remove('loading');
    }
  }

  showError(message) {
    if (!this.errorMsg) return;

    this.errorMsg.textContent = message;
    this.errorMsg.classList.add('show');
    this.emailInput?.classList.add('error');
    this.successMsg?.classList.remove('show');
  }

  clearError() {
    if (!this.errorMsg) return;

    this.errorMsg.classList.remove('show');
    this.emailInput?.classList.remove('error');
  }

  showSuccess() {
    if (!this.successMsg) return;

    this.successMsg.textContent = 'ðŸŽ‰ Success! Check your email to confirm your subscription.';
    this.successMsg.classList.add('show');
    this.errorMsg?.classList.remove('show');

    this.submitBtn?.classList.add('success');

    // Success state'i 3 saniye sonra kaldÄ±r
    setTimeout(() => {
      this.submitBtn?.classList.remove('success');
      this.successMsg?.classList.remove('show');
    }, 3000);
  }
}

// Initialize when DOM is ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', () => {
    new NewsletterHandler();
  });
} else {
  new NewsletterHandler();
}
</script>